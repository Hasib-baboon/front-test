<template>
  <div class="">
    <div class="slider__warpper">
      <div class="flex__container flex--yua flex--active" data-slide="1">
        <div class="flex__item flex__item--left">
      <div class="flex__content">
        <p class="text--sub">Yua Gen I</p>
        <h1 class="text--big">CyberYua</h1>
        <p class="text--normal">CyberYua is an Electric-type Yua introduced in Generation I. 
          CyberYua are small, chubby, and incredibly cute mouse-like Yua. 
          They are almost completely covered by yellow fur.</p>
      </div>
      <p class="text__background">CyberYua</p>
        </div>
        <!-- <img
          class="
            pt-[5%]
            xsm-md:w-[70%]
            w-[25%]
            slider-yua-left
            xsm-md:left-[5%]
            left-[10%]
          "
          src="yua-sample-left-1.webp"
        /> -->
        <div class="flex__item flex__item--right">
        </div>
        <img
          class="
            pt-[110%]
            xsm-md:w-[70%]
            w-[25%]
            slider-yua-right
            xsm-md:right-[5%]
            right-[10%]
          "
          src="yua-sample-4.webp"
        />
      </div>
      <div class="flex__container flex--yua animate--start" data-slide="2">
        <div class="flex__item flex__item--left">
                <div class="flex__content">
        <p class="text--sub">Yua Gen I</p>
        <h1 class="text--big">CyberYua</h1>
        <p class="text--normal">CyberYua is an Electric-type Yua introduced in Generation I. 
          CyberYua are small, chubby, and incredibly cute mouse-like Yua. 
          They are almost completely covered by yellow fur.</p>
      </div>
      <p class="text__background">CyberYua</p>
        </div>
        <!-- <img
          class="
            pt-[5%]
            xsm-md:w-[70%]
            w-[25%]
            slider-yua-left
            xsm-md:left-[5%]
            left-[10%]
          "
          src="yua-sample-left-2.webp"
        /> -->
        <div class="flex__item flex__item--right"></div>
        <img
          class="
            pt-[110%]
            xsm-md:w-[70%]
            w-[25%]
            slider-yua-right
            xsm-md:right-[5%]
            right-[10%]
          "
          src="yua-sample-3.webp"
        />
      </div>
      <div class="flex__container flex--yua animate--start" data-slide="3">
        <div class="flex__item flex__item--left">
                <div class="flex__content">
        <p class="text--sub">Yua Gen I</p>
        <h1 class="text--big">CyberYua</h1>
        <p class="text--normal">CyberYua is an Electric-type Yua introduced in Generation I. 
          CyberYua are small, chubby, and incredibly cute mouse-like Yua. 
          They are almost completely covered by yellow fur.</p>
      </div>
      <p class="text__background">CyberYua</p>
        </div>
        <!-- <img
          class="
            pt-[5%]
            xsm-md:w-[70%]
            w-[25%]
            slider-yua-left
            xsm-md:left-[5%]
            left-[10%]
          "
          src="yua-sample-left-3.webp"
        /> -->
        <div class="flex__item flex__item--right"></div>
        <img
          class="
            pt-[110%]
            xsm-md:w-[70%]
            w-[25%]
            slider-yua-right
            xsm-md:right-[5%]
            right-[10%]
          "
          src="yua-sample-2.webp"
        />
      </div>
      <div class="flex__container flex--yua animate--start" data-slide="4">
        <div class="flex__item flex__item--left">
                <div class="flex__content">
        <p class="text--sub">Yua Gen I</p>
        <h1 class="text--big">CyberYua</h1>
        <p class="text--normal">CyberYua is an Electric-type Yua introduced in Generation I. 
          CyberYua are small, chubby, and incredibly cute mouse-like Yua. 
          They are almost completely covered by yellow fur.</p>
      </div>
      <p class="text__background">CyberYua</p>
        </div>
        <!-- <img
          class="
            pt-[5%]
            xsm-md:w-[70%]
            w-[25%]
            slider-yua-left
            xsm-md:left-[5%]
            left-[10%]
          "
          src="yua-sample-left-4.webp"
        /> -->
        <div class="flex__item flex__item--right"></div>
        <img
          class="
            pt-[110%]
            xsm-md:w-[70%]
            w-[25%]
            slider-yua-right
            xsm-md:right-[5%]
            right-[10%]
          "
          src="yua-sample-3.webp"
        />
      </div>
      <div class="flex__container flex--yua animate--start" data-slide="5">
        <div class="flex__item flex__item--left">
                <div class="flex__content">
        <p class="text--sub">Yua Gen I</p>
        <h1 class="text--big">CyberYua</h1>
        <p class="text--normal">CyberYua is an Electric-type Yua introduced in Generation I. 
          CyberYua are small, chubby, and incredibly cute mouse-like Yua. 
          They are almost completely covered by yellow fur.</p>
      </div>
      <p class="text__background">CyberYua</p>
        </div>
        <!-- <img
          class="
            pt-[5%]
            xsm-md:w-[70%]
            w-[25%]
            slider-yua-left
            xsm-md:left-[5%]
            left-[10%]
          "
          src="Tank_top_Wavylight_blonde.png"
          id="sampleimage2"
        /> -->
        <div class="flex__item flex__item--right"></div>
        <img
          class="
            pt-[110%]
            xsm-md:w-[70%]
            w-[25%]
            slider-yua-right
            xsm-md:right-[5%]
            right-[10%]
          "
          src="yua-sample-3.webp"
          id="sampleimage"
        />
      </div>
    </div>

    <div
      class="
        slider__navi
        xsm-md:ml-[35%]
        ml-[45%]
        mt-[2%]
        grid-cols-5
        space-x-4
      "
    >
      <a href="#" class="slide-nav active" data-slide="1">pikachu</a>
      <a href="#" class="slide-nav" data-slide="2">piplup</a>
      <a href="#" class="slide-nav" data-slide="3">blaziken</a>
      <a href="#" class="slide-nav" data-slide="4">dialga</a>
      <a href="#" class="slide-nav" data-slide="5">zekrom</a>
    </div>
  </div>
</template>
<script>
import $ from "jquery";
let interval_id;

export default {
  name: "Slider",
  data() {
    return {
      images: ["prof.jpeg", "prof.jpeg", "prof.jpeg", "prof.jpeg"],
      timer: null,
      currentIndex: 0,
      global_var: 2,
    };
  },

  mounted() {
    $(".slide-nav").on("click", function (e, next = 0) {
      e.preventDefault();
      // get current slide
      var current = $(".flex--active").data("slide");
      // get button data-slide
      if (next == 0) {
        clearInterval(interval_id);
        // console.log("cleared", interval_id)
        // setTimeout(setInterval, 20000, this.toggle, 5000)
        next = $(this).data("slide");
      }

      $(".slide-nav").removeClass("active");
      $(".slider__navi")
        .find(".slide-nav[data-slide=" + next + "]")
        .addClass("active");

      if (current === next) {
        return false;
      } else {
        $(".slider__warpper")
          .find(".flex__container[data-slide=" + next + "]")
          .addClass("flex--preStart");
        $(".flex--active").addClass("animate--end");
        setTimeout(function () {
          $(".flex--preStart")
            .removeClass("animate--start flex--preStart")
            .addClass("flex--active");
          $(".animate--end")
            .addClass("animate--start")
            .removeClass("animate--end flex--active");
        }, 800);
      }
    });

    interval_id = setInterval(this.toggle, 5000);
    // console.log("interval Id is", interval_id)
  },

  methods: {
    toggle() {
      if (this.global_var > 5) {
        this.global_var = 1;
        return;
      }

      $(".slide-nav").trigger("click", this.global_var.toString());
      this.global_var += 1;
    },
  },

  computed: {
    currentImg: function () {
      return this.images[Math.abs(this.currentIndex) % this.images.length];
    },
  },
};
</script>


<style scoped>
.slider__navi {
  position: absolute;
  transform: translateY(-50%);
  -webkit-transform: translateY(-50%);
  -moz-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  -o-transform: translateY(-50%);
  z-index: 999;
  width: 100%;
  padding-bottom: 5%;
}

.slider__navi a {
  display: inline-block;
  height: 1%;
  width: 2%;
  text-indent: -9999px;
  box-shadow: none;
  border: none;
  background: rgba(100, 185, 255, 0.2);
}

.slider__navi a.active {
  background: rgba(255, 255, 255, 1);
}

.flex__container {
  /* background: rgba(0, 0, 0, 0.198); */
  position: absolute;
  left: 0;
  display: flex;
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flex;
  -webkit-flex-flow: row wrap;
  -moz-flex-flow: row wrap;
  -ms-flex-flow: row wrap;
  -o-flex-flow: row wrap;
  flex-flow: row wrap;
  -webkit-justify-content: flex-start;
  -moz-justify-content: flex-start;
  -ms-justify-content: flex-start;
  -o-justify-content: flex-start;
  justify-content: flex-start;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 1;
}

.flex__container.flex--active {
  z-index: 2;
}

.text--sub {
  color: red;
  font-size: 12px;
  letter-spacing: 0.5rem;
  text-transform: uppercase;
  margin-bottom: 40px;
}

/* Portrait and Landscape */
@media only screen and (min-device-width: 375px) and (max-device-width: 812px) and (-webkit-min-device-pixel-ratio: 3) {
  .text--big {
    font-size: 4.5em;
    font-weight: 700;
    margin-left: -8px;
  }
}

@media only screen and (min-device-width: 812px) {
  .text--big {
    font-size: 7.5em;
    font-weight: 700;
    margin-left: -8px;
  }
}

.text--normal {
  color: rgba(255, 255, 255, 0.8);
  margin-top: 25px;
}

.text__background {
  position: absolute;
  /* left: 72px; */
  color: rgba(0, 0, 0, 0.05);
  font-size: 170px;
  font-weight: 700;
}

.flex__item {
  height: 150vh;
  color: #fff;
  transition: transform 0.1s linear;
}
.flex--yua .flex__item--left {
  background: transparent; /*#3e9fe6;*/
}

.flex--yua .flex__item--right {
  background: transparent; /*#d3eaef;*/
}

.flex__item--left {
  display: flex;
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flex;
  align-items: center;
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  width: 65%;
  /* transform-origin: left bottom; */
  transition: transform 0.1s linear 0.4s;
  opacity: 0;
  position: relative;
  overflow: hidden;
}

.flex__item--right {
  width: 100%;
  transform-origin: right center;
  transition: transform 0.1s linear 0s;
  opacity: 0;
}
.flex__item--left {
  width: 100%;
  transform-origin: left center;
  transition: transform 0.1s linear 0s;
  opacity: 0;
}

.flex--preStart .flex__item--left,
.flex--preStart .flex__item--right,
.flex--active .flex__item--left,
.flex--active .flex__item--right {
  opacity: 1;
}

.flex__content {
  margin-top: -200%;
  margin-left: 10%;
  width: 90%;
  opacity: 1;
  padding: 2%;
  transform: translate3d(0, 0, 0);
  transition: transform 0.2s linear 0.2s, opacity 0.1s linear 0.2s;
  z-index: 2;
}

.slider-yua-right {
  position: absolute;
  opacity: 1;
  transform: translate3d(0, 0, 0);
  transition: opacity 0.43s 0.6s,
    transform 0.4s 0.65s cubic-bezier(0, 0.88, 0.4, 0.93);
}

.slider-yua-left {
  position: absolute;
  opacity: 1;
  transform: translate3d(0, 0, 0);
  transition: opacity 0.43s 0.6s,
    transform 0.4s 0.65s cubic-bezier(0, 0.88, 0.4, 0.93);
}
/* Animate-START point */

.flex__container.animate--start .flex__content {
  transform: translate3d(0, -200%, 0);
  opacity: 0;
}

.flex__container.animate--start .slider-yua-right {
  transform: translate3d(200px, 0, 0);
  opacity: 0;
}
.flex__container.animate--start .slider-yua-left {
  transform: translate3d(-200px, 0, 0);
  opacity: 0;
}

/* Animate-END point */

.flex__container.animate--end .flex__item--left {
  transform: scaleX(0);
}

.flex__container.animate--end .flex__item--right {
  transform: scaleX(0);
}

.flex__container.animate--end .slider-yua-left {
  transform: translate3d(-200px, 0, 0);
  opacity: 0;
}

.flex__container.animate--end .slider-yua-right {
  transform: translate3d(200px, 0, 0);
  opacity: 0;
}
</style>
